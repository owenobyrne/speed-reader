---
phase: 08-frameless-window
plan: 01
type: execute
---

<objective>
Convert to frameless window with custom close/minimize controls in top right corner.

Purpose: Cleaner visual appearance without OS window chrome, maintaining the minimal aesthetic.
Output: Frameless Electron window with draggable title bar region and functional close/minimize buttons.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@main.js (current BrowserWindow setup - add frame: false, titleBarStyle)
@index.html (add title bar element)
@styles.css (add title bar styling)
@preload.js (add IPC for window controls)
@renderer.js (add button handlers)

**Prior phase:** 07-visual-polish complete - smooth transitions and ORP alignment working
**Tech available:** Electron 40 with contextIsolation, IPC architecture established
**Established patterns:** IPC handlers in main.js, preload exposes API, renderer calls window.api
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure frameless window with drag region</name>
  <files>main.js, index.html, styles.css</files>
  <action>
    1. In main.js BrowserWindow options, add:
       - frame: false (removes OS chrome)
       - titleBarStyle: 'hidden' (macOS: hides title but keeps traffic lights - we'll hide those too)
       - trafficLightPosition: { x: -100, y: -100 } (macOS: move traffic lights off-screen)

    2. In index.html, add title bar div as first child of body:
       ```html
       <div id="title-bar">
         <div class="title-bar-drag"></div>
         <div class="window-controls">
           <button id="minimize-btn" class="window-btn">&#x2212;</button>
           <button id="close-btn" class="window-btn">&#x2715;</button>
         </div>
       </div>
       ```

    3. In styles.css, add title bar styling:
       - #title-bar: height 32px, position fixed top 0, full width, display flex, justify-content flex-end
       - .title-bar-drag: flex 1, -webkit-app-region: drag (makes it draggable)
       - .window-controls: display flex, -webkit-app-region: no-drag
       - .window-btn: 32x32px, no border, transparent bg, white text, hover bg rgba(255,255,255,0.1)
       - #close-btn:hover: red background (standard close button behavior)
       - Adjust body/drop-zone to account for 32px title bar height
  </action>
  <verify>npm start shows frameless window, title bar visible at top, window draggable by title bar region</verify>
  <done>Window has no OS chrome, custom title bar shows minimize/close buttons, window is draggable</done>
</task>

<task type="auto">
  <name>Task 2: Wire up window control buttons</name>
  <files>preload.js, main.js, renderer.js</files>
  <action>
    1. In preload.js, expose window control methods:
       ```javascript
       minimizeWindow: () => ipcRenderer.invoke('minimize-window'),
       closeWindow: () => ipcRenderer.invoke('close-window')
       ```

    2. In main.js, add IPC handlers:
       ```javascript
       ipcMain.handle('minimize-window', (event) => {
         BrowserWindow.fromWebContents(event.sender).minimize();
       });

       ipcMain.handle('close-window', (event) => {
         BrowserWindow.fromWebContents(event.sender).close();
       });
       ```

    3. In renderer.js, add click handlers at the top (after DOMContentLoaded or in init):
       ```javascript
       document.getElementById('minimize-btn').addEventListener('click', () => window.api.minimizeWindow());
       document.getElementById('close-btn').addEventListener('click', () => window.api.closeWindow());
       ```
  </action>
  <verify>Click minimize button - window minimizes. Click close button - window closes. App restarts cleanly.</verify>
  <done>Minimize and close buttons functional, no console errors, clean app lifecycle</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm start` launches frameless window
- [ ] Window has no OS title bar/chrome
- [ ] Title bar region is draggable
- [ ] Minimize button minimizes window
- [ ] Close button closes window
- [ ] All existing functionality still works (drop files, read, controls)
- [ ] No console errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Frameless window with custom controls working on current platform
- No regression in existing features
</success_criteria>

<output>
After completion, create `.planning/phases/08-frameless-window/08-01-SUMMARY.md`
</output>
